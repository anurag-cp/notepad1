<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind Ease AI - Emotion Journal</title>
    <style>
        :root {
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-secondary: rgba(255,255,255,0.1);
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --glass-bg: rgba(255,255,255,0.25);
            --border-glass: rgba(255,255,255,0.18);
            --shadow: 0 25px 45px rgba(0,0,0,0.1);
        }
        [data-theme="dark"] {
            --bg-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --bg-secondary: rgba(0,0,0,0.3);
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --glass-bg: rgba(0,0,0,0.4);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.3s ease;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid var(--border-glass);
            box-shadow: var(--shadow);
            overflow: hidden;
            animation: slideUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .header {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        .header:hover::before { left: 100%; }
        .logo { font-size: 2.5em; font-weight: 800; background: linear-gradient(45deg, #fff, #f0f9ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
        .tagline { color: var(--text-secondary); font-size: 1.1em; }
        .input-section { padding: 40px; border-bottom: 1px solid var(--border-glass); }
        .input-grid { display: grid; grid-template-columns: 1fr 1fr 2fr auto; gap: 20px; align-items: end; }
        .quick-moods { display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; }
        .quick-mood { 
            width: 56px; height: 56px; border-radius: 16px; 
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5em; cursor: pointer; border: none;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
        }
        .quick-mood:hover { transform: scale(1.1) rotate(5deg); }
        input, textarea, select {
            padding: 16px 20px; border: 2px solid rgba(255,255,255,0.2);
            border-radius: 16px; font-size: 16px; background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px); color: var(--text-primary);
            transition: all 0.3s ease;
        }
        input:focus, textarea:focus, select:focus {
            outline: none; border-color: #4facfe; box-shadow: 0 0 0 4px rgba(79, 172, 254, 0.1);
            background: rgba(255,255,255,0.2);
        }
        textarea { resize: vertical; min-height: 120px; }
        .btn-primary {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white; border: none; padding: 16px 32px;
            border-radius: 16px; cursor: pointer; font-size: 16px; font-weight: 600;
            transition: all 0.2s; position: relative; overflow: hidden;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3); }
        .btn-primary:active { transform: scale(0.98); }
        .emotion-preview {
            grid-column: 1 / -1; padding: 16px 20px; border-radius: 16px;
            font-weight: 600; text-align: center; min-height: 24px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);
        }
        .notes-section { max-height: 600px; overflow-y: auto; padding: 20px; }
        .note-item {
            background: var(--glass-bg); backdrop-filter: blur(15px);
            border-radius: 20px; margin-bottom: 16px; padding: 24px;
            border: 1px solid var(--border-glass); transition: all 0.3s ease;
            animation: slideInUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .note-item:hover {
            transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .note-header { display: flex; gap: 16px; align-items: flex-start; margin-bottom: 12px; }
        .emotion-badge {
            padding: 8px 16px; border-radius: 20px; font-size: 12px; font-weight: 700;
            color: white; min-width: 80px; text-align: center;
        }
        .note-title { font-size: 1.3em; font-weight: 700; color: var(--text-primary); margin-bottom: 8px; }
        .note-text { color: var(--text-secondary); line-height: 1.7; margin-bottom: 16px; }
        .note-meta { display: flex; gap: 20px; font-size: 14px; color: var(--text-secondary); }
        .note-advice {
            background: rgba(254, 243, 199, 0.5); padding: 16px; border-radius: 12px;
            margin-top: 16px; font-style: italic; backdrop-filter: blur(10px);
            border-left: 4px solid #f59e0b;
        }
        .stats-grid {
            padding: 30px; background: var(--glass-bg); backdrop-filter: blur(20px);
            display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: center;
        }
        .theme-toggle { background: none; border: 1px solid var(--border-glass); color: var(--text-primary); padding: 12px; border-radius: 12px; cursor: pointer; }
        .streak-ring {
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 18px;
        }
        @media (max-width: 768px) {
            .input-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: 1fr; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <div class="header">
            <div class="logo">üß† Mind Ease AI</div>
            <div class="tagline">Your AI Emotion Journal & Wellness Companion</div>
        </div>
        
        <div class="input-section">
            <div class="quick-moods">
                <button class="quick-mood" style="background: #10b981;" onclick="quickNote('üòä Great day! Feeling positive')">üòä</button>
                <button class="quick-mood" style="background: #f59e0b;" onclick="quickNote('üò° Frustrated today')">üò°</button>
                <button class="quick-mood" style="background: #ef4444;" onclick="quickNote('üò¢ Feeling down')">üò¢</button>
                <button class="quick-mood" style="background: #6b7280;" onclick="quickNote('üò∞ Anxious')">üò∞</button>
            </div>
            <div class="input-grid">
                <input type="text" id="noteTitle" placeholder="What's on your mind?">
                <select id="noteCategory">
                    <option value="Daily">Daily Life</option>
                    <option value="Work">Work</option>
                    <option value="Health">Health</option>
                    <option value="Family">Family</option>
                    <option value="Mood">Mood Check</option>
                </select>
                <textarea id="noteText" placeholder="Write freely... AI analyzes emotions & gives advice" oninput="previewEmotion()"></textarea>
                <button class="btn-primary" onclick="addNote()">‚ú® Add Note</button>
                <div id="emotionPreview" class="emotion-preview">Start typing for AI insights...</div>
            </div>
        </div>
        
        <div class="notes-section" id="notesContainer"></div>
        
        <div class="stats-grid">
            <div>
                <div id="totalNotes" style="font-size: 24px; font-weight: 700;">Total: 0</div>
                <div id="todayNotes" style="color: var(--text-secondary);">Today: 0</div>
            </div>
            <div class="streak-ring" style="background: conic-gradient(#10b981 0deg 0deg, #6b7280 0deg 360deg); border-radius: 50%; box-shadow: inset 0 0 0 2px rgba(255,255,255,0.3);" id="streakRing">7üî•</div>
            <div style="text-align: right;">
                <button class="theme-toggle" onclick="toggleTheme()">üåô</button>
                <button class="btn-primary" onclick="exportNotes()" style="margin-top: 12px;">üíæ Backup</button>
            </div>
        </div>
    </div>

    <script>
        let notes = JSON.parse(localStorage.getItem('mindEaseNotes')) || [];
        let editIndex = -1;
        let currentStreak = 0;

        const emotionKeywords = {
            happy: ['happy','great','awesome','love','excited','blessed','grateful','amazing','wonderful','joy','smile','laugh','fun','success','proud','mazza','achha','khushi','pyaar'],
            sad: ['sad','depressed','crying','hurt','lonely','tired','down','upset','broken','pain','üò¢'],
            angry: ['angry','furious','mad','enraged','livid','annoyed','frustrated','irritated','pissed','hate','üò°'],
            anxious: ['worried','stress','anxiety','scared','fear','panic','nervous','tense','overwhelmed','üò∞']
        };

        const emotionColors = {
            happy: '#10b981', sad: '#ef4444', angry: '#f59e0b', anxious: '#6b7280', neutral: '#9ca3af'
        };

        const adviceBank = {
            happy: ["‚ú® Keep nurturing this positivity!", "üåü What made you feel this way?", "üòä Share this joy with someone!", "üéâ Celebrate these moments!"],
            sad: ["ü§ó It's okay to feel this way.", "üíô Try 3 things you're grateful for.", "üåßÔ∏è This will pass. Breathe deeply.", "ü´Ç Reach out to someone you trust."],
            angry: ["üî• Take 3 deep breaths first.", "‚ö° Step away for 5 minutes.", "üí™ Channel this into action.", "üßò‚Äç‚ôÇÔ∏è Try 4-7-8 breathing now."],
            anxious: ["üß† You're safe right now.", "‚òÄÔ∏è Name 5 things you see.", "üåø One step at a time.", "üí´ You've handled this before."]
        };

        function detectEmotion(text) {
            if (!text) return 'neutral';
            const lowerText = text.toLowerCase();
            let scores = { happy: 0, sad: 0, angry: 0, anxious: 0, neutral: 0 };
            
            for (let emotion in emotionKeywords) {
                scores[emotion] = emotionKeywords[emotion].filter(word => lowerText.includes(word)).length;
            }
            return Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
        }

        function generateAdvice(note) {
            const emotion = note.emotion;
            let advice = adviceBank[emotion][Math.floor(Math.random() * adviceBank[emotion].length)];
            
            if (note.text.toLowerCase().includes('work') || note.text.toLowerCase().includes('boss')) {
                advice = "üíº Work stress? Set one boundary today. " + advice;
            }
            return advice;
        }

        function previewEmotion() {
            const text = document.getElementById('noteText').value;
            const emotion = detectEmotion(text);
            const preview = document.getElementById('emotionPreview');
            preview.innerHTML = `AI detected: <strong style="color: ${emotionColors[emotion]}">${emotion.toUpperCase()}</strong> üòä`;
            preview.style.borderColor = emotionColors[emotion];
            preview.style.background = emotionColors[emotion] + '20';
        }

        function quickNote(quickText) {
            document.getElementById('noteText').value = quickText;
            previewEmotion();
            document.getElementById('noteText').focus();
        }

        function saveNotes() {
            localStorage.setItem('mindEaseNotes', JSON.stringify(notes));
            updateStats();
            renderNotes();
        }

        function addNote() {
            const title = document.getElementById('noteTitle').value.trim();
            const category = document.getElementById('noteCategory').value;
            const text = document.getElementById('noteText').value.trim();

            if (!title && !text) return alert('Please write something!');

            const emotion = detectEmotion(text);
            const note = {
                id: Date.now(),
                title: title || 'Quick Note',
                category, text, emotion,
                advice: generateAdvice({text, emotion}),
                date: new Date().toLocaleString('en-IN', {
                    weekday: 'short', year: 'numeric', month: 'short', day: 'numeric',
                    hour: '2-digit', minute: '2-digit'
                }),
                created: new Date().toDateString()
            };

            if (editIndex >= 0) {
                notes[editIndex] = note; editIndex = -1;
                document.querySelector('.btn-primary').textContent = '‚ú® Add Note';
            } else {
                notes.unshift(note);
                updateStreak();
            }

            document.getElementById('noteTitle').value = '';
            document.getElementById('noteText').value = '';
            document.getElementById('noteCategory').value = 'Daily';
            document.getElementById('emotionPreview').textContent = 'Start typing for AI insights...';
            saveNotes();
        }

        function updateStreak() {
            const today = new Date().toDateString();
            const yesterday = new Date(Date.now() - 86400000).toDateString();
            const recentNotes = notes.filter(n => n.created === today || n.created === yesterday);
            currentStreak = recentNotes.length >= 2 ? currentStreak + 1 : 1;
        }

        function renderNotes() {
            document.getElementById('notesContainer').innerHTML = notes.map((note, index) => `
                <div class="note-item">
                    <div class="note-header">
                        <div class="emotion-badge" style="background: ${emotionColors[note.emotion]}">
                            ${note.emotion.toUpperCase()}
                        </div>
                        <div style="flex: 1;">
                            <div class="note-title">${note.title}</div>
                            <div style="font-size: 14px; color: var(--text-secondary);">${note.category} ‚Ä¢ ${note.date}</div>
                        </div>
                    </div>
                    <div class="note-text">${note.text}</div>
                    <div class="note-advice">üí° ${note.advice}</div>
                    <div style="margin-top: 16px; display: flex; gap: 12px;">
                        <button class="btn-primary" style="padding: 8px 16px; font-size: 14px;" onclick="editNote(${index})">Edit</button>
                        <button onclick="deleteNote(${index})" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            const total = notes.length;
            const today = notes.filter(n => n.created === new Date().toDateString()).length;
            document.getElementById('totalNotes').textContent = `Total: ${total}`;
            document.getElementById('todayNotes').textContent = `Today: ${today}`;
            document.getElementById('streakRing').textContent = `${Math.min(currentStreak, 30)}üî•`;
            document.getElementById('streakRing').style.background = `conic-gradient(#10b981 0deg ${currentStreak*12}deg, #6b7280 ${currentStreak*12}deg 360deg)`;
        }

        function toggleTheme() {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
            document.querySelector('.theme-toggle').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('mindEaseTheme', isDark ? 'light' : 'dark');
        }

        function exportNotes() {
            const dataStr = JSON.stringify(notes, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url; link.download = `mind-ease-backup-${new Date().toISOString().slice(0,10)}.json`;
            link.click();
        }

        // Event listeners
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) addNote();
        });

        // Load theme
        if (localStorage.getItem('mindEaseTheme') === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
        }

        // Initialize
        updateStreak();
        renderNotes();
        updateStats();
    </script>
</body>
</html>
